"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.RootToaster=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf3=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _reactNativeModal=_interopRequireDefault(require("react-native-modal"));var _jsxFileName="/Users/piedigrossi/react-native-root-toaster/src/RootToaster.tsx";var MARGIN=4;var BLACK_COAL='#2e3137';var styles=_reactNative.StyleSheet.create({container:{flexDirection:'row',alignItems:'center',justifyContent:'space-between',paddingLeft:MARGIN*4,paddingTop:MARGIN*7,paddingBottom:MARGIN*4},safeContainer:{margin:0,padding:0},modal:{flex:1,margin:0,justifyContent:'flex-start'},text:{fontSize:14,lineHeight:20,letterSpacing:0,color:'#ffffff',flex:1}});var DEFAULT_DURATION=3000;var ANIMATION_DELAY=500;var RootToaster=function(_Component){(0,_inherits2.default)(RootToaster,_Component);function RootToaster(){var _getPrototypeOf2;var _this;(0,_classCallCheck2.default)(this,RootToaster);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=(0,_possibleConstructorReturn2.default)(this,(_getPrototypeOf2=(0,_getPrototypeOf3.default)(RootToaster)).call.apply(_getPrototypeOf2,[this].concat(args)));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"state",{isVisible:_this.props.visible||false,duration:_this.props.defaultDuration||DEFAULT_DURATION,text:_this.props.defaultMessage||''});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"_hideTimeout",0);(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"_showTimeout",setTimeout(function(){},0));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"eventListener",null);(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"_show",function(text,duration){setTimeout(function(){_reactNative.StatusBar.setBarStyle('light-content');},ANIMATION_DELAY/2);clearTimeout(_this._showTimeout);clearTimeout(_this._hideTimeout);_this.setState({text:text||'',duration:duration||DEFAULT_DURATION,isVisible:true});if(_this.state.duration>0){_this._showTimeout=setTimeout(function(){return _this._hide();},_this.state.duration);}});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"_hide",function(){_reactNative.StatusBar.setBarStyle('dark-content');clearTimeout(_this._showTimeout);clearTimeout(_this._hideTimeout);_this.setState({isVisible:false});});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"listener",function(data){_this._show(data.message||'',data.duration);});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"componentDidMount",function(){_this.eventListener=_reactNative.DeviceEventEmitter.addListener('showToaster',_this.listener);if(_this.state.isVisible){_this._show();}});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"componentDidUpdate",function(prevProps){if(_this.props.visible!==prevProps.visible){if(_this.props.visible){_this._show();}else{_this._hide();}}});return _this;}(0,_createClass2.default)(RootToaster,[{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.eventListener)_reactNative.DeviceEventEmitter.removeListener('showToaster',this.listener);}},{key:"render",value:function render(){var _this2=this;return _react.default.createElement(_reactNativeModal.default,{isVisible:this.state.isVisible,animationIn:"slideInDown",animationInTiming:ANIMATION_DELAY,animationOut:"slideOutUp",animationOutTiming:ANIMATION_DELAY,hasBackdrop:false,coverScreen:false,style:styles.modal,__source:{fileName:_jsxFileName,lineNumber:134}},_react.default.createElement(_reactNative.SafeAreaView,{style:[styles.safeContainer,{backgroundColor:this.props.defaultColor||BLACK_COAL}],__source:{fileName:_jsxFileName,lineNumber:144}},_react.default.createElement(_reactNative.View,{style:[styles.container,{backgroundColor:this.props.defaultColor||BLACK_COAL}],__source:{fileName:_jsxFileName,lineNumber:150}},_react.default.createElement(_reactNative.Text,{style:styles.text,__source:{fileName:_jsxFileName,lineNumber:156}},this.state.text),this.props.CloseComponent&&_react.default.createElement(_reactNative.TouchableOpacity,{onPress:function onPress(){return _this2._hide();},style:styles.container,__source:{fileName:_jsxFileName,lineNumber:159}},this.props.CloseComponent({})))));}}]);return RootToaster;}(_react.Component);exports.RootToaster=RootToaster;
//# sourceMappingURL=RootToaster.js.map